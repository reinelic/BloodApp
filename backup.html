<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Learning</title>
    <style></style>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
      integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
      crossorigin=""
    />

    <script
      src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
      integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
      crossorigin=""
    ></script>
  </head>

  <body>
    <pre id="app"></pre>

    <script>
      class MapElement extends HTMLElement {
        connectedCallback() {
          var div = document.createElement('div')
          div.setAttribute('id', 'map')
          div.classList.add('mapL')
          this.appendChild(div)

          var map = L.map('map').setView([51.505, -0.09], 13)

          L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution:
              '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
          }).addTo(map)

          console.log(' running ..')
        }
      }
      window.customElements.define('map-user', MapElement)
    </script>

    <script>
      var app = Elm.Learning.init({ node: document.getElementById('app') })

      app.ports.setData.subscribe(function (options) {
        console.log(options)
      })
    </script>
  </body>
</html>
